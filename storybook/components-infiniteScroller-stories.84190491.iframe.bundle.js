"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[3870],{"./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_loadingSpinner__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),_typography__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ScrollMessage=styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP.div.withConfig({displayName:"infiniteScroller__ScrollMessage",componentId:"sc-smx7an-0"})(["width:100%;padding:140px 0 40px;margin:-100px auto 0;text-align:center;p{color:",";}"],(_ref=>{let{theme}=_ref;return theme.colors.fg.tertiary})),LoadingContainer=styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP.div.withConfig({displayName:"infiniteScroller__LoadingContainer",componentId:"sc-smx7an-1"})(["display:flex;justify-content:center;"]),AriaOnlyAlert=styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP.span.withConfig({displayName:"infiniteScroller__AriaOnlyAlert",componentId:"sc-smx7an-2"})(["",""],_theme__WEBPACK_IMPORTED_MODULE_4__.j);var State=function(State){return State.Loadable="loadable",State.LoadingInternal="loading_internal",State.LoadingExternal="loading_external",State.Complete="complete",State}(State||{}),Action=function(Action){return Action.OnInternalLoad="internal on load",Action.OnExternalLoad="external on load",Action.OnAllLoaded="all loaded",Action.OnLoadSuccess="load success",Action.OnCanLoadMore="can load more",Action}(Action||{});const machine={[State.Loadable]:{[Action.OnInternalLoad]:State.LoadingInternal,[Action.OnExternalLoad]:State.LoadingExternal},[State.LoadingInternal]:{[Action.OnAllLoaded]:State.Complete,[Action.OnLoadSuccess]:State.Loadable},[State.LoadingExternal]:{[Action.OnAllLoaded]:State.Complete,[Action.OnLoadSuccess]:State.Loadable},[State.Complete]:{[Action.OnCanLoadMore]:State.Loadable}},loadReducer=(state,action)=>machine[state][action]||state;function InfiniteScroller(_ref2){let{allDataLoadedMessage,allDataLoadedAriaMessage,onLoadMore,canLoadMore,isLoading,loadingAriaMessage,loadingSpinnerProps={animationSize:50,circleSize:6}}=_ref2;const loadingRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.sO)(null),onLoadMoreRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.sO)(onLoadMore);onLoadMoreRef.current=onLoadMore;const[loadState,dispatch]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__._Y)(loadReducer,State.Loadable),loadingAlert=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Ye)((()=>loadState===State.LoadingInternal?loadingAriaMessage:loadState===State.LoadingExternal||canLoadMore?null:allDataLoadedAriaMessage),[allDataLoadedAriaMessage,loadingAriaMessage,loadState,canLoadMore]);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.d4)((()=>{loadState===State.LoadingInternal&&onLoadMoreRef.current?.()}),[loadState]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.d4)((()=>{isLoading&&dispatch(Action.OnExternalLoad)}),[isLoading]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.d4)((()=>{isLoading||dispatch(canLoadMore?Action.OnLoadSuccess:Action.OnAllLoaded)}),[isLoading,canLoadMore]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.d4)((()=>{canLoadMore&&dispatch(Action.OnCanLoadMore)}),[canLoadMore]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.d4)((()=>{if(!loadingRef.current)return;const observer=new IntersectionObserver((entries=>{entries.forEach((entry=>{entry.isIntersecting&&dispatch(Action.OnInternalLoad)}))}),{rootMargin:"0px",threshold:0}),triggerEl=loadingRef.current;return observer.observe(triggerEl),()=>{observer.unobserve(triggerEl)}}),[]);const loadingContent=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Ye)((()=>loadState===State.LoadingExternal?null:canLoadMore?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingContainer,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_loadingSpinner__WEBPACK_IMPORTED_MODULE_7__.Z,{...loadingSpinnerProps})}):allDataLoadedMessage?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_typography__WEBPACK_IMPORTED_MODULE_5__.x.Paragraph,{size:_theme__WEBPACK_IMPORTED_MODULE_6__.TextSize.Small,children:allDataLoadedMessage}):null),[allDataLoadedMessage,canLoadMore,loadState,loadingSpinnerProps]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(ScrollMessage,{"data-testid":"load-more-on-scroll",ref:loadingRef,children:[loadingAlert&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(AriaOnlyAlert,{role:"status",children:loadingAlert}),loadingContent]})}InfiniteScroller.displayName="InfiniteScroller";const __WEBPACK_DEFAULT_EXPORT__=InfiniteScroller},"./packages/design-system/src/components/infiniteScroller/stories/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{_default:()=>_default,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_infiniteScroller__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"DesignSystem/Components/InfiniteScroller",component:_infiniteScroller__WEBPACK_IMPORTED_MODULE_3__.Z,args:{loadingAriaMessage:"Data is loading - please note, interesection observers and storybook do not play nicely in firefox.",allDataLoadedMessage:"all data is loaded",allDataLoadedAriaMessage:"all data is loaded"},parameters:{controls:{include:["loadingMessage","allDataLoadedMessage"]}}},Item=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.div.withConfig({displayName:"stories__Item",componentId:"sc-392lku-0"})(["display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;height:300px;padding:20px;margin-top:20px;background-color:teal;color:salmon;font-size:30px;font-weight:600;&:nth-child(odd){background-color:salmon;color:teal;}"]),generateArray=n=>new Array(n).fill((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"Demo Item"})),_default={render:function Render(args){const[currentCount,setCurrentCount]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.eJ)(5),[isAllDataLoaded,setIsAllDataLoaded]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.eJ)(!1),[isLoading,setIsLoading]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.eJ)(!1),[dummyData,setDummyData]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.eJ)(generateArray(currentCount));return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.d4)((()=>{setDummyData(generateArray(currentCount)),30===currentCount&&setIsAllDataLoaded(!0),setIsLoading(!1)}),[currentCount]),dummyData.length>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:[dummyData.map(((data,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(Item,{children:[data," ",index]},index))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_infiniteScroller__WEBPACK_IMPORTED_MODULE_3__.Z,{onLoadMore:()=>{setIsLoading(!0),setCurrentCount(currentCount+5)},isLoading,canLoadMore:!isAllDataLoaded,...args})]}):null}}},"./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),uuid__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/i18n/src/i18n.ts"),_theme__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/constants/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const TAU=2*Math.PI,AriaOnlyAlert=styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP.span.withConfig({displayName:"loadingSpinner__AriaOnlyAlert",componentId:"sc-10eor9p-0"})(["",""],_theme__WEBPACK_IMPORTED_MODULE_4__.j),Container=styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP.div.withConfig({displayName:"loadingSpinner__Container",componentId:"sc-10eor9p-1"})(["position:relative;height:","px;width:","px;color:",";"],(_ref=>{let{animationSize}=_ref;return animationSize}),(_ref2=>{let{animationSize}=_ref2;return animationSize}),(_ref3=>{let{theme}=_ref3;return theme.colors.interactiveBg.brandNormal})),Circle=styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP.div.withConfig({displayName:"loadingSpinner__Circle",componentId:"sc-10eor9p-2"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) ",";height:","px;width:","px;background-color:",";border-radius:",";animation-name:",";animation-fill-mode:both;animation-duration:","s;animation-iteration-count:infinite;animation-timing-function:",";"],(_ref4=>{let{$position:{x,y}}=_ref4;return`translate(${x}px, ${y}px)`}),(_ref5=>{let{circleSize}=_ref5;return circleSize}),(_ref6=>{let{circleSize}=_ref6;return circleSize}),(_ref7=>{let{theme}=_ref7;return theme.colors.interactiveBg.brandNormal}),(_ref8=>{let{theme}=_ref8;return theme.borders.radius.round}),(_ref9=>{let{circleIndex,numCircles}=_ref9;return(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.F4)(["0%{opacity:1}","{opacity:1}","{opacity:0.3}","{opacity:1}"],100*circleIndex/numCircles+"%",100*(circleIndex+1)/numCircles+"%",100*(circleIndex+1)/numCircles+1+"%")}),.85,_theme__WEBPACK_IMPORTED_MODULE_5__.s.inOutQuad);function LoadingSpinner(_ref10){let{animationSize=95,circleSize=12,loadingMessage=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__.__)("Loading","web-stories"),numCircles=11,...props}=_ref10;const ids=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Ye)((()=>new Array(numCircles).fill(1).map((()=>(0,uuid__WEBPACK_IMPORTED_MODULE_7__.Z)()))),[numCircles]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(Container,{animationSize,...props,children:[loadingMessage&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(AriaOnlyAlert,{role:"status",children:loadingMessage}),ids.map(((id,index)=>{const angle=((index,numCircles)=>TAU*index/numCircles)(index,numCircles),position=((angle,animationSize)=>{const radius=animationSize/2,x=Math.sin(angle)*radius,y=-Math.cos(angle)*radius;return{x:x.toFixed(1),y:y.toFixed(1)}})(angle,animationSize);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Circle,{circleIndex:index,circleSize,numCircles,$position:position},id)}))]})}LoadingSpinner.displayName="LoadingSpinner";const __WEBPACK_DEFAULT_EXPORT__=LoadingSpinner},"./packages/design-system/src/components/typography/styles.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>defaultTypographyStyle});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");const defaultTypographyStyle=_ref=>{let{theme}=_ref;return(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.iv)(["font-family:",";color:",";margin:0;padding:0;&:focus{box-shadow:none;}"],theme.typography.family.primary,theme.colors.fg.primary)}},"./packages/design-system/src/components/typography/text/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>Text});var styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_theme__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),_styles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/components/typography/styles.ts");const textCss=_ref=>{let{isBold=!1,size=_theme__WEBPACK_IMPORTED_MODULE_0__.TextSize.Medium,theme}=_ref;return(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.iv)(["",";",";font-weight:",";"],_styles__WEBPACK_IMPORTED_MODULE_2__.y,_theme__WEBPACK_IMPORTED_MODULE_3__._({preset:theme.typography.presets.paragraph[size],theme}),isBold?theme.typography.weight.bold:theme.typography.presets.paragraph[size].weight)},Paragraph=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.p.withConfig({displayName:"text__Paragraph",componentId:"sc-1kd0vh8-0"})(["",";"],textCss),Span=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.span.withConfig({displayName:"text__Span",componentId:"sc-1kd0vh8-1"})(["",";"],textCss),Kbd=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.kbd.withConfig({displayName:"text__Kbd",componentId:"sc-1kd0vh8-2"})(["",";background-color:transparent;white-space:nowrap;"],textCss),Text={Label:styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.label.withConfig({displayName:"text__Label",componentId:"sc-1kd0vh8-3"})(["",";color:",";"],(_ref2=>{let{isBold=!1,size=_theme__WEBPACK_IMPORTED_MODULE_0__.TextSize.Medium,theme}=_ref2;return(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.iv)(["",";",";font-weight:",";"],_styles__WEBPACK_IMPORTED_MODULE_2__.y,_theme__WEBPACK_IMPORTED_MODULE_3__._({preset:theme.typography.presets.label[size],theme}),isBold?theme.typography.weight.bold:theme.typography.presets.label[size].weight)}),(_ref3=>{let{disabled,theme}=_ref3;return disabled?theme.colors.fg.disable:"auto"})),Span,Kbd,Paragraph}},"./packages/design-system/src/theme/helpers/expandPresetStyles.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>expandTextPreset,_:()=>expandPresetStyles});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/theme/types.ts");const expandPresetStyles=_ref=>{let{preset,theme}=_ref;return preset?(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.iv)(["font-family:",";font-size:","px;font-weight:",";letter-spacing:","px;line-height:","px;text-decoration:none;"],theme.typography.family.primary,preset.size,preset.weight,preset.letterSpacing,preset.lineHeight):(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.iv)([""])},expandTextPreset=presetSelector=>_ref2=>{let{theme}=_ref2;return expandPresetStyles({preset:presetSelector(theme.typography.presets,_types__WEBPACK_IMPORTED_MODULE_1__.TextSize),theme})}},"./packages/design-system/src/theme/helpers/visuallyHidden.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>visuallyHidden});const visuallyHidden=(0,__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").iv)(["position:absolute;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;"])},"./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>esm_browser_v4});const esm_browser_native={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(arr,offset=0){return(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase()}const esm_browser_v4=function v4(options,buf,offset){if(esm_browser_native.randomUUID&&!buf&&!options)return esm_browser_native.randomUUID();const rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return unsafeStringify(rnds)}}}]);