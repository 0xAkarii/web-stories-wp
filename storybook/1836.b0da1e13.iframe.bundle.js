"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[1836],{"./packages/design-system/src/icons/cross_small.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgCrossSmall=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.148 12.146a.5.5 0 0 1 .707.708L16.708 16l3.148 3.148a.5.5 0 1 1-.707.707l-3.148-3.148-3.147 3.147a.5.5 0 0 1-.708-.707l3.148-3.147-3.147-3.147a.5.5 0 0 1 .707-.707l3.147 3.147 3.147-3.148Z",clipRule:"evenodd"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgCrossSmall)},"./packages/design-system/src/components/search/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K5:()=>DEFAULT_PLACEHOLDER,kg:()=>Z_INDEX,m7:()=>DEFAULT_POPUP_FILL_WIDTH,q0:()=>DEFAULT_ARIA_INPUT_LABEL,z6:()=>DEFAULT_ARIA_CLEAR_LABEL});var _googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/src/i18n.ts");const DEFAULT_POPUP_FILL_WIDTH=276,DEFAULT_PLACEHOLDER=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Search","web-stories"),DEFAULT_ARIA_CLEAR_LABEL=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Clear Search","web-stories"),DEFAULT_ARIA_INPUT_LABEL=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Search","web-stories"),Z_INDEX={CLEAR_BUTTON:5}},"./packages/design-system/src/components/search/input/input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>input});__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),cross_small=__webpack_require__("./packages/design-system/src/icons/cross_small.svg"),chevron_down_small=__webpack_require__("./packages/design-system/src/icons/chevron_down_small.svg"),magnifier=__webpack_require__("./packages/design-system/src/icons/magnifier.svg"),expandPresetStyles=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),outline=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),constants=__webpack_require__("./packages/design-system/src/components/search/constants.ts");const InputContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"input__InputContainer",componentId:"sc-hhun7d-0"})((_ref=>{let{theme}=_ref;return(0,styled_components_browser_esm.iv)(["display:flex;position:relative;height:36px;width:100%;max-width:400px;background-color:transparent;color:",";"],theme.colors.fg.primary)})),Input=styled_components_browser_esm.ZP.input.withConfig({displayName:"input__Input",componentId:"sc-hhun7d-1"})((_ref2=>{let{theme,hasError}=_ref2;return(0,styled_components_browser_esm.iv)(["position:absolute;height:100%;width:100%;background-color:transparent;outline:none;cursor:pointer;",";color:",";border:1px solid ",";padding:8px 20px 8px 40px;&::placeholder{color:",";}&[aria-expanded='true']{border-color:",";}border-radius:",";&::-ms-clear{display:none;}&::-webkit-search-decoration,&::-webkit-search-cancel-button,&::-webkit-search-results-button,&::-webkit-search-results-decoration{appearance:none;}&:hover{border-color:",";}",";"," &:disabled{pointer-events:none;border-color:",";color:",";&:hover{border-color:",";}}"],expandPresetStyles._({preset:theme.typography.presets.paragraph[types.TextSize.Small],theme}),theme.colors.fg.primary,theme.colors.border.defaultNormal,theme.colors.fg.tertiary,theme.colors.border.defaultActive,theme.borders.radius.small,theme.colors.border.defaultHover,outline.L(theme.colors.border.focus),hasError&&(0,styled_components_browser_esm.iv)(["border-color:",";&:active,&:hover{border-color:",";}"],theme.colors.interactiveBg.negativeHover,theme.colors.interactiveBg.negativeHover),theme.colors.border.disable,theme.colors.fg.disable,theme.colors.border.disable)})),BaseDecorationContainer=(0,styled_components_browser_esm.iv)(["display:flex;align-items:center;width:32px;background-color:transparent;color:",";border:0;margin:auto 1px auto auto;padding:0;align-self:flex-end;cursor:pointer;"],(_ref3=>{let{theme}=_ref3;return theme.colors.fg.secondary})),ClearButton=styled_components_browser_esm.ZP.button.withConfig({displayName:"input__ClearButton",componentId:"sc-hhun7d-2"})(["",";display:",";outline:none;",";height:30px;z-index:",";"],BaseDecorationContainer,(_ref4=>{let{isVisible}=_ref4;return isVisible?"flex":"none"}),(_ref5=>{let{theme}=_ref5;return outline.L(theme.colors.border.focus)}),constants.kg.CLEAR_BUTTON),ClearIcon=(0,styled_components_browser_esm.ZP)(cross_small.Z).withConfig({displayName:"input__ClearIcon",componentId:"sc-hhun7d-3"})(["width:32px;height:auto;margin:auto;"]),ChevronDecoration=styled_components_browser_esm.ZP.div.withConfig({displayName:"input__ChevronDecoration",componentId:"sc-hhun7d-4"})(["",";display:",";visibility:",";height:100%;",""],BaseDecorationContainer,(_ref6=>{let{isVisible}=_ref6;return isVisible?"flex":"none"}),(_ref7=>{let{isVisible}=_ref7;return isVisible?"visible":"collapsed"}),(_ref8=>{let{disabled,theme}=_ref8;return disabled&&(0,styled_components_browser_esm.iv)(["pointer-events:none;color:",";"],theme.colors.fg.disable)})),ChevronIcon=(0,styled_components_browser_esm.ZP)(chevron_down_small.Z).withConfig({displayName:"input__ChevronIcon",componentId:"sc-hhun7d-5"})(["width:32px;height:auto;margin:auto;",""],(_ref9=>{let{$isMenuOpen}=_ref9;return $isMenuOpen&&(0,styled_components_browser_esm.iv)(["transform:rotate(180deg);"])})),SearchDecoration=styled_components_browser_esm.ZP.div.withConfig({displayName:"input__SearchDecoration",componentId:"sc-hhun7d-6"})((_ref10=>{let{theme,activeSearch,disabled}=_ref10;return(0,styled_components_browser_esm.iv)(["",";position:absolute;height:100%;margin:0;left:8px;color:",";pointer-events:none;",""],BaseDecorationContainer,activeSearch?theme.colors.fg.tertiary:theme.colors.fg.primary,disabled&&(0,styled_components_browser_esm.iv)(["color:",";"],theme.colors.fg.disable))})),SearchIcon=(0,styled_components_browser_esm.ZP)(magnifier.Z).withConfig({displayName:"input__SearchIcon",componentId:"sc-hhun7d-7"})(["position:relative;width:32px;height:auto;margin:auto;"]);var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const input=(0,src.Gp)(((_ref,ref)=>{let{ariaClearLabel,clearId,disabled,handleClearInput=()=>{},handleTabClear,inputValue,isOpen,listId,className="",...rest}=_ref;const[inputChanged,setInputChanged]=(0,src.eJ)(!1),[isEmptyValue,setIsEmptyValue]=(0,src.eJ)(!1),activeInput=(0,src.Ye)((()=>inputValue.length>0&&isOpen),[isOpen,inputValue]),alignInputCenter=(0,src.Ye)((()=>0===inputValue.length&&!isOpen),[isOpen,inputValue]),onClearButtonKeyDown=(0,src.I4)((_ref2=>{let{key}=_ref2;"Tab"===key&&handleTabClear?.()}),[handleTabClear]),handleOnInput=(0,src.I4)((value=>{setIsEmptyValue(""===value),setInputChanged(isOpen)}),[isOpen]);return(0,jsx_runtime.jsxs)(InputContainer,{className,children:[(0,jsx_runtime.jsx)(Input,{"aria-disabled":disabled,autoComplete:"off",disabled,onInput:event=>handleOnInput(event.currentTarget.value),ref,type:"search",value:inputValue,...listId&&{role:"combobox","aria-expanded":isOpen,"aria-controls":listId,"aria-owns":listId,"aria-autocomplete":"list"},...rest}),(0,jsx_runtime.jsx)(SearchDecoration,{activeSearch:alignInputCenter,"aria-hidden":!0,disabled,children:(0,jsx_runtime.jsx)(SearchIcon,{id:clearId})}),(0,jsx_runtime.jsx)(ClearButton,{type:"button",isVisible:activeInput&&inputChanged,tabIndex:0,"aria-label":activeInput&&inputChanged?ariaClearLabel:"",onClick:handleClearInput,onKeyDown:onClearButtonKeyDown,children:(0,jsx_runtime.jsx)(ClearIcon,{id:clearId,"data-testid":"clear-search-icon"})}),(0,jsx_runtime.jsx)(ChevronDecoration,{disabled,"aria-hidden":activeInput&&inputChanged||isEmptyValue,isVisible:(!activeInput||!inputChanged)&&!isEmptyValue&&inputValue.length>0,children:(0,jsx_runtime.jsx)(ChevronIcon,{$isMenuOpen:isOpen,"data-testid":"chevron-search-icon"})})]})}))},"./packages/design-system/src/components/search/search.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>search});__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),v4=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),menu=__webpack_require__("./packages/design-system/src/components/menu/menu.tsx"),constants=__webpack_require__("./packages/design-system/src/components/popup/constants.ts"),popup=__webpack_require__("./packages/design-system/src/components/popup/popup.tsx"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts");const DropDownContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"search__DropDownContainer",componentId:"sc-1i3s2c5-0"})(["display:flex;flex-direction:column;width:100%;"]),Label=(0,styled_components_browser_esm.ZP)(typography_text.x.Label).withConfig({displayName:"search__Label",componentId:"sc-1i3s2c5-1"})(["margin-bottom:8px;color:",";"],(_ref=>{let{theme,disabled}=_ref;return theme.colors.fg[disabled?"disable":"primary"]})),Hint=(0,styled_components_browser_esm.ZP)(typography_text.x.Paragraph).withConfig({displayName:"search__Hint",componentId:"sc-1i3s2c5-2"})(["margin-top:12px;padding-left:2px;color:",";"],(_ref2=>{let{theme,hasError}=_ref2;return theme.colors.fg[hasError?"negative":"tertiary"]}));var search_constants=__webpack_require__("./packages/design-system/src/components/search/constants.ts"),input=__webpack_require__("./packages/design-system/src/components/search/input/input.tsx"),utils=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.flat-map.js"),__webpack_require__("./packages/design-system/src/components/menu/utils.ts")),useLiveRegion=__webpack_require__("./packages/design-system/src/utils/useLiveRegion.ts");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const SearchInputWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"search__SearchInputWrapper",componentId:"sc-1jug8cl-0"})([""]);function Search(_ref){let{ariaInputLabel=search_constants.q0,ariaClearLabel=search_constants.z6,disabled,handleSearchValueChange,hasError,hint,label,onMenuItemClick,onClear,options=[],placeholder=search_constants.K5,placement=constants.ug.Bottom,popupFillWidth=search_constants.m7,popupZIndex,selectedValue,searchValue,...rest}=_ref;const listId=(0,src.Ye)((()=>`list-${(0,v4.Z)()}`),[]),inputId=(0,src.Ye)((()=>`select-button-${(0,v4.Z)()}`),[]),clearId=(0,src.Ye)((()=>`clear-button-${(0,v4.Z)()}`),[]),inputRef=(0,src.sO)(null),inputWrapperRef=(0,src.sO)(null),{activeOption,getActiveOption,inputState,setInputState,isMenuFocused,setIsMenuFocused,isOpen,setIsOpen,groups}=function useSearch(_ref){let{handleSearchValueChange,selectedValue,searchValue,options}=_ref;const speak=(0,useLiveRegion.Z)("assertive"),[isOpen,_setIsOpen]=(0,src.eJ)(!1),setIsOpen=(0,src.y1)(_setIsOpen,100),[isMenuFocused,_setIsMenuFocused]=(0,src.eJ)(!1),setIsMenuFocused=(0,src.y1)(_setIsMenuFocused,300,{leading:!0});(0,src.d4)((()=>{isOpen||setIsMenuFocused(!1)}),[isOpen,setIsMenuFocused]);const groups=(0,src.Ye)((()=>(0,utils.j)(options)),[options]),getActiveOption=(0,src.I4)((selectedVal=>groups.flatMap((group=>group.options)).find((option=>String(option.value).toLowerCase()===String(selectedVal).toLowerCase()))),[groups]),activeOption=(0,src.Ye)((()=>{const selected=selectedValue?String(selectedValue.value):searchValue;return selected&&0!==groups.length?getActiveOption(selected):null}),[selectedValue,searchValue,groups,getActiveOption]),[inputState,_setInputState]=(0,src.eJ)(searchValue),setInputState=(0,src.I4)((value=>{_setInputState(value),void 0!==value&&handleSearchValueChange?.(value)}),[handleSearchValueChange]);return(0,src.d4)((()=>{void 0===inputState&&void 0!==selectedValue?.value&&setInputState(selectedValue?.label||"")}),[inputState,setInputState,selectedValue]),(0,src.d4)((()=>{if(isOpen&&inputState?.length){const message=options.length?(0,sprintf.Z)((0,i18n._n)("%d result found.","%d results found.",options.length,"web-stories"),String(options.length)):(0,i18n.__)("No results found.","web-stories");speak(message)}}),[inputState,isOpen,options.length,speak]),{activeOption,getActiveOption,groups,inputState,setInputState,isMenuFocused,setIsMenuFocused,isOpen,setIsOpen}}({options,selectedValue,searchValue,handleSearchValueChange}),isMenuHidden=(0,src.Ye)((()=>Boolean(disabled||!inputState?.length)),[disabled,inputState]),handleInputFocus=(0,src.I4)((()=>{setIsOpen(!0),setIsMenuFocused(!1)}),[setIsOpen,setIsMenuFocused]),handleInputClick=(0,src.I4)((event=>{event.preventDefault(),setIsOpen(!0)}),[setIsOpen]),handleDismissMenu=(0,src.I4)((event=>{clearId&&event?.currentTarget instanceof HTMLElement&&event.currentTarget.id===clearId||setIsOpen(!1)}),[clearId,setIsOpen]),handleMenuItemClick=(0,src.I4)(((event,menuItem)=>{setIsOpen(!1);const newOption=getActiveOption(menuItem)||{label:String(menuItem),value:menuItem};setInputState(String(newOption.label)),onMenuItemClick?.(event,newOption)}),[getActiveOption,setInputState,setIsOpen,onMenuItemClick]),handleReturnToInput=(0,src.I4)((()=>inputRef?.current?.focus()),[]),handleInputChange=(0,src.I4)((_ref2=>{let{target}=_ref2;setInputState(target.value),setIsOpen(target.value.length>0)}),[setInputState,setIsOpen]),handleClearInput=(0,src.I4)((()=>{setInputState(""),onClear?.(),handleReturnToInput?.()}),[handleReturnToInput,setInputState,onClear]),handleTabClear=(0,src.I4)((()=>{setIsOpen(!1),setIsMenuFocused(!1)}),[setIsOpen,setIsMenuFocused]),focusSentToList=(0,src.I4)((()=>setIsMenuFocused(!0)),[setIsMenuFocused]),handleEndSearch=(0,src.I4)((()=>{(isMenuHidden||0===inputState?.trim().length)&&(setIsMenuFocused(!1),setIsOpen(!1))}),[inputState,setIsMenuFocused,isMenuHidden,setIsOpen]),handleInputKeyPress=(0,src.I4)((event=>{const{key}=event;"Escape"===key?isMenuHidden||setIsMenuFocused(!1):"Tab"===key?handleEndSearch():"ArrowDown"===key?focusSentToList():"Enter"===key&&inputState&&inputState.trim().length>0&&handleMenuItemClick(event.nativeEvent,String(inputState))}),[isMenuHidden,setIsMenuFocused,handleEndSearch,focusSentToList,inputState,handleMenuItemClick]);return(0,src.FR)(inputWrapperRef,handleEndSearch,[handleEndSearch]),(0,jsx_runtime.jsxs)(DropDownContainer,{children:[label&&(0,jsx_runtime.jsx)(Label,{size:types.TextSize.Small,disabled,isBold:!0,children:label}),(0,jsx_runtime.jsx)(SearchInputWrapper,{ref:inputWrapperRef,children:(0,jsx_runtime.jsx)(input.Z,{"aria-label":ariaInputLabel,hasError,id:inputId,onChange:handleInputChange,onClick:handleInputClick,onFocus:handleInputFocus,onKeyDown:handleInputKeyPress,placeholder,ariaClearLabel,clearId,disabled,handleClearInput,handleTabClear,inputValue:inputState||"",isOpen,listId,ref:inputRef,...rest})}),!isMenuHidden&&(0,jsx_runtime.jsx)(popup.Z,{anchor:inputRef,isOpen,placement,fillWidth:popupFillWidth,zIndex:popupZIndex,ignoreMaxOffsetY:!0,children:(0,jsx_runtime.jsx)(menu.Z,{activeValue:activeOption?.value,handleReturnToParent:handleReturnToInput,isMenuFocused,listId,menuAriaLabel:(0,sprintf.Z)((0,i18n.__)("%s Option List Selector","web-stories"),ariaInputLabel),onDismissMenu:handleDismissMenu,handleMenuItemSelect:handleMenuItemClick,groups,parentId:inputId,...rest})}),hint&&(0,jsx_runtime.jsx)(Hint,{hasError,size:types.TextSize.Small,children:hint})]})}Search.displayName="Search";const search=Search}}]);