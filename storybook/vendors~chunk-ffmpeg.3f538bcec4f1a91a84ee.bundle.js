(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{2016:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){return function resolveUrl(){var numUrls=arguments.length;if(0===numUrls)throw new Error("resolveUrl requires at least one argument; got none.");var base=document.createElement("base");if(base.href=arguments[0],1===numUrls)return base.href;var head=document.getElementsByTagName("head")[0];head.insertBefore(base,head.firstChild);for(var resolved,a=document.createElement("a"),index=1;index<numUrls;index++)a.href=arguments[index],resolved=a.href,base.href=resolved;return head.removeChild(base),resolved}})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},2017:function(module,exports){let logging=!1,customLogger=()=>{};module.exports={logging:logging,setLogging:_logging=>{logging=_logging},setCustomLogger:logger=>{customLogger=logger},log:(type,message)=>{customLogger({type:type,message:message}),logging&&console.log(`[${type}] ${message}`)}}},2018:function(module,exports,__webpack_require__){const defaultOptions=__webpack_require__(2025),getCreateFFmpegCore=__webpack_require__(2026),fetchFile=__webpack_require__(2027);module.exports={defaultOptions:defaultOptions,getCreateFFmpegCore:getCreateFFmpegCore,fetchFile:fetchFile}},2019:function(module){module.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.9.6","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.8.5","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.2.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"},"_resolved":"https://registry.npmjs.org/@ffmpeg/ffmpeg/-/ffmpeg-0.9.6.tgz","_integrity":"sha512-ov5FAV3dHRJ/+ZxQH9V5GvY/iczwq5vrKWeu4tpytxZewTSAhZ1aKD/sFBzd79nQNF+CTktxUp3LWuGECXBNeA==","_from":"@ffmpeg/ffmpeg@0.9.6"}')},2020:function(module,exports,__webpack_require__){var runtime=function(exports){"use strict";var Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function invoke(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){var previousPromise;this._invoke=function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){!function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}(module.exports);try{regeneratorRuntime=runtime}catch(accidentalStrictMode){Function("r","regeneratorRuntime = r")(runtime)}},2021:function(module,exports,__webpack_require__){const{defaultArgs:defaultArgs,baseOptions:baseOptions}=__webpack_require__(2022),{setLogging:setLogging,setCustomLogger:setCustomLogger,log:log}=__webpack_require__(2017),parseProgress=__webpack_require__(2023),parseArgs=__webpack_require__(2024),{defaultOptions:defaultOptions,getCreateFFmpegCore:getCreateFFmpegCore}=__webpack_require__(2018),{version:version}=__webpack_require__(2019),NO_LOAD=Error("ffmpeg.wasm is not ready, make sure you have completed load().");module.exports=(_options={})=>{const{log:logging,logger:logger,progress:optProgress,...options}={...baseOptions,...defaultOptions,..._options};let Core=null,ffmpeg=null,runResolve=null,running=!1,progress=optProgress;const parseMessage=({type:type,message:message})=>{log(type,message),parseProgress(message,progress),(message=>{"FFMPEG_END"===message&&null!==runResolve&&(runResolve(),runResolve=null,running=!1)})(message)};return setLogging(logging),setCustomLogger(logger),log("info","use ffmpeg.wasm v"+version),{setProgress:_progress=>{progress=_progress},setLogger:_logger=>{setCustomLogger(_logger)},setLogging:setLogging,load:async()=>{if(log("info","load ffmpeg-core"),null!==Core)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{log("info","loading ffmpeg-core");const{createFFmpegCore:createFFmpegCore,corePath:corePath,workerPath:workerPath,wasmPath:wasmPath}=await getCreateFFmpegCore(options);Core=await createFFmpegCore({mainScriptUrlOrBlob:corePath,printErr:message=>parseMessage({type:"fferr",message:message}),print:message=>parseMessage({type:"ffout",message:message}),locateFile:(path,prefix)=>{if("undefined"!=typeof window){if(void 0!==wasmPath&&path.endsWith("ffmpeg-core.wasm"))return wasmPath;if(void 0!==workerPath&&path.endsWith("ffmpeg-core.worker.js"))return workerPath}return prefix+path}}),ffmpeg=Core.cwrap("proxy_main","number",["number","number"]),log("info","ffmpeg-core loaded")}},isLoaded:()=>null!==Core,run:(..._args)=>{if(log("info","run ffmpeg command: "+_args.join(" ")),null===Core)throw NO_LOAD;if(running)throw Error("ffmpeg.wasm can only run one command at a time");return running=!0,new Promise(resolve=>{const args=[...defaultArgs,..._args].filter(s=>0!==s.length);runResolve=resolve,ffmpeg(...parseArgs(Core,args))})},FS:(method,...args)=>{if(log("info",`run FS.${method} ${args.map(arg=>"string"==typeof arg?arg:`<${arg.length} bytes binary file>`).join(" ")}`),null===Core)throw NO_LOAD;{let ret=null;try{ret=Core.FS[method](...args)}catch(e){throw"readdir"===method?Error(`ffmpeg.FS('readdir', '${args[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`):"readFile"===method?Error(`ffmpeg.FS('readFile', '${args[0]}') error. Check if the path exists`):Error("Oops, something went wrong in FS operation.")}return ret}}}}},2022:function(module,exports){module.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},2023:function(module,exports){let duration=0;const ts2sec=ts=>{const[h,m,s]=ts.split(":");return 60*parseFloat(h)*60+60*parseFloat(m)+parseFloat(s)};module.exports=(message,progress)=>{if("string"==typeof message)if(message.startsWith("  Duration")){const ts=message.split(", ")[0].split(": ")[1],d=ts2sec(ts);(0===duration||duration>d)&&(duration=d)}else if(message.startsWith("frame")){const ts=message.split("time=")[1].split(" ")[0];progress({ratio:ts2sec(ts)/duration})}else message.startsWith("video:")&&(progress({ratio:1}),duration=0)}},2024:function(module,exports){module.exports=(Core,args)=>{const argsPtr=Core._malloc(args.length*Uint32Array.BYTES_PER_ELEMENT);return args.forEach((s,idx)=>{const buf=Core._malloc(s.length+1);Core.writeAsciiToMemory(s,buf),Core.setValue(argsPtr+Uint32Array.BYTES_PER_ELEMENT*idx,buf,"i32")}),[args.length,argsPtr]}},2025:function(module,exports,__webpack_require__){(function(process){const resolveURL=__webpack_require__(2016),{devDependencies:devDependencies}=__webpack_require__(2019);module.exports={corePath:void 0!==process&&"development"===Object({NODE_ENV:"production",NODE_PATH:"",STORYBOOK:"true",PUBLIC_URL:"."}).FFMPEG_ENV?resolveURL("/node_modules/@ffmpeg/core/dist/ffmpeg-core.js"):`https://unpkg.com/@ffmpeg/core@${devDependencies["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}}).call(this,__webpack_require__(400))},2026:function(module,exports,__webpack_require__){const resolveURL=__webpack_require__(2016),{log:log}=__webpack_require__(2017),toBlobURL=async(url,mimeType)=>{log("info","fetch "+url);const buf=await(await fetch(url)).arrayBuffer();log("info",`${url} file size = ${buf.byteLength} bytes`);const blob=new Blob([buf],{type:mimeType}),blobURL=URL.createObjectURL(blob);return log("info",`${url} blob URL = ${blobURL}`),blobURL};module.exports=async({corePath:_corePath})=>{if("string"!=typeof _corePath)throw Error("corePath should be a string!");const coreRemotePath=resolveURL(_corePath),corePath=await toBlobURL(coreRemotePath,"application/javascript"),wasmPath=await toBlobURL(coreRemotePath.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),workerPath=await toBlobURL(coreRemotePath.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"==typeof createFFmpegCore?new Promise(resolve=>{const script=document.createElement("script"),eventHandler=()=>{script.removeEventListener("load",eventHandler),log("info","ffmpeg-core.js script loaded"),resolve({createFFmpegCore:createFFmpegCore,corePath:corePath,wasmPath:wasmPath,workerPath:workerPath})};script.src=corePath,script.type="text/javascript",script.addEventListener("load",eventHandler),document.getElementsByTagName("head")[0].appendChild(script)}):(log("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore:createFFmpegCore,corePath:corePath,wasmPath:wasmPath,workerPath:workerPath}))}},2027:function(module,exports,__webpack_require__){const resolveURL=__webpack_require__(2016);module.exports=async _data=>{let data=_data;if(void 0===_data)return new Uint8Array;if("string"==typeof _data)if(/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(_data))data=atob(_data.split(",")[1]).split("").map(c=>c.charCodeAt(0));else{const res=await fetch(resolveURL(_data));data=await res.arrayBuffer()}else(_data instanceof File||_data instanceof Blob)&&(data=await(blob=_data,new Promise((resolve,reject)=>{const fileReader=new FileReader;fileReader.onload=()=>{resolve(fileReader.result)},fileReader.onerror=({target:{error:{code:code}}})=>{reject(Error("File could not be read! Code="+code))},fileReader.readAsArrayBuffer(blob)})));var blob;return new Uint8Array(data)}},2028:function(module,exports,__webpack_require__){__webpack_require__(2020);const createFFmpeg=__webpack_require__(2021),{fetchFile:fetchFile}=__webpack_require__(2018);module.exports={createFFmpeg:createFFmpeg,fetchFile:fetchFile}}}]);
//# sourceMappingURL=vendors~chunk-ffmpeg.3f538bcec4f1a91a84ee.bundle.js.map