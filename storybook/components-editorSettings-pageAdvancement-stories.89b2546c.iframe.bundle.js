"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[5735],{"./packages/design-system/src/components/input/numericInput.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>numericInput});__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),keyboard=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),big=__webpack_require__("./node_modules/big.js/big.mjs");function parseInput(value,_ref){let{allowEmpty,isFloat,min,max}=_ref;if(`${String(value)}`.length>0){let boundedValue=isFloat?parseFloat(String(value)):parseInt(String(value));return void 0!==min&&(boundedValue=Math.max(min,boundedValue)),void 0!==max&&(boundedValue=Math.min(max,boundedValue)),isNaN(boundedValue)?null:boundedValue}return allowEmpty?"":null}const input_useNumericInput=_ref=>{let{allowEmpty,updateOnChange,isFloat,padZero,max,min,onChange,value,ref}=_ref;const _inputRef=(0,src.sO)(null),inputRef=ref&&"current"in ref?ref:_inputRef,oldValue=(0,src.sO)(value),revertToOriginal=(0,src.sO)(!1),[currentValue,setCurrentValue]=(0,src.eJ)(value),options=(0,src.Ye)((()=>({allowEmpty,isFloat,padZero,max,min})),[allowEmpty,isFloat,padZero,max,min]),handleBlur=(0,src.I4)((ev=>{let newValue=parseInput(oldValue.current,options);if(revertToOriginal.current||null===newValue)null!==currentValue&&(newValue=parseInput(currentValue,options));else{const parsedValue=parseInput(currentValue,options);null!==parsedValue&&(newValue=parsedValue)}revertToOriginal.current=!1,null!==newValue?(setCurrentValue(newValue),newValue!==oldValue.current&&onChange(ev,newValue)):void 0!==min?(setCurrentValue(min),onChange(ev,min)):allowEmpty?(setCurrentValue(""),onChange(ev,"")):(setCurrentValue("0"),onChange(ev,"0"))}),[allowEmpty,currentValue,min,onChange,options]),handleChange=(0,src.I4)((ev=>{const trimmedTargetValue=ev.target.value.trim();if(""===trimmedTargetValue)return setCurrentValue(""),void(updateOnChange&&allowEmpty&&onChange(ev,""));if(isNaN(Number(trimmedTargetValue)))"-"===trimmedTargetValue&&(setCurrentValue(trimmedTargetValue),updateOnChange&&onChange(ev,trimmedTargetValue));else{if(""===ev.target.value&&allowEmpty)return setCurrentValue(""),void(updateOnChange&&onChange(ev,""));const parsedValue=options.isFloat?parseFloat(ev.target.value):parseInt(ev.target.value);if(void 0!==max&&parsedValue>max)return void(parsedValue>max&&(setCurrentValue(trimmedTargetValue.charAt(trimmedTargetValue.length-1)),updateOnChange&&onChange(ev,Number(ev.target.value.trim().charAt(trimmedTargetValue.length-1)))));const maxPad=void 0!==max?String(max).length:0,paddedValue=!ev.target.value.endsWith(".")&&options.padZero?String(parsedValue).padStart(maxPad,"0"):trimmedTargetValue;setCurrentValue(paddedValue),updateOnChange&&onChange(ev,Number(paddedValue))}}),[allowEmpty,max,onChange,options,updateOnChange]),handleKeyUpAndDown=(0,src.I4)((ev=>{const{altKey,key}=ev,isCurrentValueValid=function isInputValid(value,_ref2){let{allowEmpty,isFloat,min,max}=_ref2;if(allowEmpty&&0===`${String(value)}`.length)return!0;const valueAsANumber=isFloat?parseFloat(String(value)):parseInt(String(value));return!(void 0!==min&&valueAsANumber<min||void 0!==max&&valueAsANumber>max||isNaN(valueAsANumber))}(currentValue,options);let newValue=isCurrentValueValid?parseInput(currentValue,options):0;newValue=null===newValue?"":newValue;const diff=(0,big.Z)(options.isFloat&&altKey?.1:1);"ArrowUp"===key?newValue=void 0!==max?Math.min(max,(0,big.Z)(newValue).plus(diff).toNumber()):(0,big.Z)(newValue).plus(diff).toNumber():"ArrowDown"===key&&(newValue=void 0!==min?Math.max(min,(0,big.Z)(newValue).minus(diff).toNumber()):(0,big.Z)(newValue).minus(diff).toNumber()),setCurrentValue(newValue),onChange(ev,Number(newValue))}),[currentValue,max,min,onChange,options]),handleEsc=(0,src.I4)((()=>{setCurrentValue(oldValue.current),revertToOriginal.current=!0,inputRef?.current?.blur()}),[inputRef]);return(0,src.d4)((()=>{oldValue.current=value,setCurrentValue(value)}),[value]),{currentValue,inputRef,handleBlur,handleChange,handleEsc,handleKeyUpAndDown,isIndeterminate:oldValue.current===currentValue}};var input=__webpack_require__("./packages/design-system/src/components/input/input.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const numericInput=(0,src.Gp)((function NumericInput(_ref,ref){let{allowEmpty,isFloat,onBlur,onChange,updateOnChange,max,min,value="",isIndeterminate:originalIsIndeterminate,padZero,...props}=_ref;const{currentValue,handleBlur,handleChange,handleEsc,handleKeyUpAndDown,inputRef,isIndeterminate}=input_useNumericInput({allowEmpty,isFloat,padZero,onChange,updateOnChange,max,min,value,ref});(0,keyboard.Ew)(inputRef,{key:["up","alt+up","down","alt+down"],editable:!0},handleKeyUpAndDown,[handleKeyUpAndDown]),(0,keyboard.Ew)(inputRef,{key:["escape"],editable:!0},handleEsc,[handleEsc]),(0,keyboard.Ew)(inputRef,{key:["enter"],editable:!0},handleBlur,[handleBlur]),value=String(value);let paddedValue=String(currentValue);if(""===value||""!==currentValue&&"-"!==currentValue)if(allowEmpty||""!==value||""!==currentValue){if(allowEmpty&&""===value)paddedValue="";else if(""!==currentValue&&void 0!==max){const maxPad=String(max).length;paddedValue=maxPad>=String(currentValue).length?padZero?String(currentValue).padStart(maxPad,"0"):String(currentValue):String(currentValue).replace(/^0+/,"")}}else paddedValue="0";else paddedValue=String(currentValue);return(0,jsx_runtime.jsx)(input.Z,{ref:inputRef,onBlur:ev=>{onBlur?.(ev),handleBlur(ev)},onChange:ev=>{updateOnChange&&onChange?.(ev),handleChange(ev)},value:paddedValue,isIndeterminate:isIndeterminate&&originalIsIndeterminate,...props})}))},"./packages/design-system/src/components/switch/switch.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.array.group.js");var styled_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/index.ts"),uuid__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_theme__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),_typography__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");var Value=function(Value){return Value.On="ON",Value.Off="Off",Value}(Value||{});const VisuallyHiddenRadioGroupLabel=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.p.withConfig({displayName:"switch__VisuallyHiddenRadioGroupLabel",componentId:"sc-1b94qxc-0"})(["",";"],_theme__WEBPACK_IMPORTED_MODULE_5__.j),SlidingButton=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.span.withConfig({displayName:"switch__SlidingButton",componentId:"sc-1b94qxc-1"})(["position:absolute;display:block;top:0;left:0;width:50%;height:","px;border-radius:100px;transition:all 0.15s ease-out;z-index:0;",""],32,(_ref=>{let{hasOffset}=_ref;return hasOffset&&"left: 50%"})),SwitchContainer=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.div.withConfig({displayName:"switch__SwitchContainer",componentId:"sc-1b94qxc-2"})(["position:relative;height:","px;display:flex;flex-direction:row;justify-content:center;align-items:center;appearance:none;background:",";border-radius:100px;color:",";cursor:pointer;",";"],32,(_ref2=>{let{theme,darkTheme}=_ref2;return darkTheme?theme.colors.divider.secondary:theme.colors.bg.tertiary}),(_ref3=>{let{theme}=_ref3;return theme.colors.fg.primary}),(_ref4=>{let{disabled,theme,darkTheme}=_ref4;return disabled?(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.iv)(["cursor:default;background:",";","{background-color:",";}"],theme.colors.divider.tertiary,SlidingButton,theme.colors.interactiveBg.disable):(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.iv)([":hover ","{background-color:",";}"],SlidingButton,darkTheme?theme.colors.interactiveBg.primaryHover:theme.colors.interactiveBg.brandNormal)})),HiddenRadioButton=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.input.attrs({type:"radio"}).withConfig({displayName:"switch__HiddenRadioButton",componentId:"sc-1b94qxc-3"})(["position:absolute;height:0;width:0;padding:0;min-width:unset;appearance:none;border:0;box-shadow:none;margin:-1px;outline:none;overflow:hidden;opacity:0;"]),RadioButtonLabel=(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP)(_typography__WEBPACK_IMPORTED_MODULE_6__.x.Label).attrs({size:_theme__WEBPACK_IMPORTED_MODULE_7__.TextSize.Small}).withConfig({displayName:"switch__RadioButtonLabel",componentId:"sc-1b94qxc-4"})(["display:flex;align-items:center;justify-content:center;flex:1;height:","px;width:50%;padding:0px 6px;z-index:1;color:",";background-color:",";border-radius:100px;cursor:pointer;overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap;transition:all 0.15s ease-out;"," :focus-within ~ span{",";}"],32,(_ref5=>{let{isActive,theme,darkTheme}=_ref5;return isActive?darkTheme?theme.colors.inverted.fg.primary:theme.colors.fg.primary:theme.colors.fg.secondary}),(_ref6=>{let{isActive,theme,darkTheme}=_ref6;return isActive&&(darkTheme?theme.colors.interactiveBg.primaryNormal:theme.colors.interactiveBg.brandNormal)}),(_ref7=>{let{$disabled,theme}=_ref7;return $disabled&&(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.iv)(["cursor:default;color:",";"],theme.colors.fg.disable)}),_theme__WEBPACK_IMPORTED_MODULE_8__.R()),Switch=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Gp)((function Switch(_ref8,ref){let{className,disabled,groupLabel,id,offLabel,onChange,onLabel,value=!1,darkTheme=!0,...props}=_ref8;const ids=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Ye)((()=>({group:id||(0,uuid__WEBPACK_IMPORTED_MODULE_9__.Z)(),offInput:(0,uuid__WEBPACK_IMPORTED_MODULE_9__.Z)(),onInput:(0,uuid__WEBPACK_IMPORTED_MODULE_9__.Z)()})),[id]),handleChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.I4)((evt=>{onChange(evt,evt.target.value===Value.On)}),[onChange]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(SwitchContainer,{ref,className,role:"radiogroup","aria-labelledby":ids.group,"aria-disabled":disabled,disabled,darkTheme,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(VisuallyHiddenRadioGroupLabel,{id:ids.group,children:groupLabel}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(RadioButtonLabel,{htmlFor:ids.onInput,isActive:value,disabled,darkTheme,children:[onLabel,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(HiddenRadioButton,{checked:value,disabled,id:ids.onInput,onChange:handleChange,value:Value.On,...props})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(RadioButtonLabel,{htmlFor:ids.offInput,isActive:!value,disabled,darkTheme,children:[offLabel,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(HiddenRadioButton,{checked:!value,disabled,id:ids.offInput,onChange:handleChange,value:Value.Off,...props})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(SlidingButton,{hasOffset:!value})]})}));Switch.displayName="Switch";const __WEBPACK_DEFAULT_EXPORT__=Switch},"./packages/wp-dashboard/src/components/editorSettings/pageAdvancement/stories/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{_default:()=>_default,default:()=>stories});__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),switch_switch=__webpack_require__("./packages/design-system/src/components/switch/switch.tsx"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),numericInput=__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),components=__webpack_require__("./packages/wp-dashboard/src/components/editorSettings/components.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const MIN_MAX_PAGE_DURATION={MIN:1,MAX:20},TEXT={CONTEXT:(0,i18n.__)("All new stories will be set to this page advancement setting. Control whether a story auto-advances between pages, or whether the reader has to manually tap to advance.","web-stories"),SECTION_HEADING:(0,i18n.__)("Default Page Advancement","web-stories"),LABEL_AUTO:(0,i18n.__)("Auto","web-stories"),LABEL_MANUAL:(0,i18n.__)("Manual","web-stories"),SWITCH_LABEL:(0,i18n.__)("Page Advancement","web-stories"),INPUT_LABEL:(0,i18n.__)("Default page duration in seconds","web-stories"),INPUT_SUFFIX:(0,i18n.__)("Duration","web-stories"),INPUT_HELPER:(0,sprintf.Z)((0,i18n._n)("Duration between %1$d and %2$d second.","Duration between %1$d and %2$d seconds.",MIN_MAX_PAGE_DURATION.MAX,"web-stories"),MIN_MAX_PAGE_DURATION.MIN,MIN_MAX_PAGE_DURATION.MAX)},InputsWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"pageAdvancement__InputsWrapper",componentId:"sc-9snl1y-0"})(["margin-top:8px;"]),StyledSwitch=(0,styled_components_browser_esm.ZP)(switch_switch.Z).withConfig({displayName:"pageAdvancement__StyledSwitch",componentId:"sc-9snl1y-1"})(["width:186px;"]);function PageAdvancementSettings(_ref){let{updateSettings,autoAdvance,defaultPageDuration}=_ref;const[_autoAdvance,_setAutoAdvance]=(0,src.eJ)(autoAdvance),onAdvanceChange=(0,src.I4)((()=>{(0,tracking_src.L9)("change_auto_advance",{value:!autoAdvance}),_setAutoAdvance(!autoAdvance),updateSettings({autoAdvance:!autoAdvance})}),[autoAdvance,updateSettings]);(0,src.d4)((()=>{_setAutoAdvance(autoAdvance)}),[autoAdvance]);const onDurationChange=(0,src.I4)(((_,newDuration)=>{updateSettings({defaultPageDuration:newDuration}),(0,tracking_src.L9)("change_default_page_duration",{value:newDuration})}),[updateSettings]);return(0,jsx_runtime.jsxs)(components.xh,{onSubmit:e=>e.preventDefault(),children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(components.B5,{as:"h3",children:TEXT.SECTION_HEADING}),(0,jsx_runtime.jsx)(components.xs,{size:types.TextSize.Small,children:TEXT.CONTEXT})]}),(0,jsx_runtime.jsxs)(InputsWrapper,{children:[(0,jsx_runtime.jsx)(components.yN,{children:(0,jsx_runtime.jsx)(StyledSwitch,{groupLabel:TEXT.SWITCH_LABEL,name:"page-advancement-switch",value:_autoAdvance,onLabel:TEXT.LABEL_AUTO,offLabel:TEXT.LABEL_MANUAL,onChange:onAdvanceChange,darkTheme:!1})}),_autoAdvance&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(components.yN,{children:(0,jsx_runtime.jsx)(numericInput.Z,{unit:` ${(0,i18n.__)("seconds","web-stories")}`,suffix:TEXT.INPUT_SUFFIX,value:defaultPageDuration,onChange:onDurationChange,"aria-label":TEXT.INPUT_SUFFIX,min:MIN_MAX_PAGE_DURATION.MIN,max:MIN_MAX_PAGE_DURATION.MAX})}),(0,jsx_runtime.jsx)(components.rJ,{size:types.TextSize.Small,children:TEXT.INPUT_HELPER})]})]})]})}PageAdvancementSettings.displayName="PageAdvancementSettings";const pageAdvancement=PageAdvancementSettings,stories={title:"Dashboard/Views/EditorSettings/PageAdvancementSettings",component:PageAdvancementSettings,args:{autoAdvance:!0,defaultPageDuration:15},argTypes:{updateSettings:{action:"updateSettings fired"}}},_default={render:function Render(args){return(0,jsx_runtime.jsx)(pageAdvancement,{...args})}}},"./node_modules/core-js/internals/add-to-unscopables.js":(module,__unused_webpack_exports,__webpack_require__)=>{var wellKnownSymbol=__webpack_require__("./node_modules/core-js/internals/well-known-symbol.js"),create=__webpack_require__("./node_modules/core-js/internals/object-create.js"),defineProperty=__webpack_require__("./node_modules/core-js/internals/object-define-property.js").f,UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;void 0===ArrayPrototype[UNSCOPABLES]&&defineProperty(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create(null)}),module.exports=function(key){ArrayPrototype[UNSCOPABLES][key]=!0}},"./node_modules/core-js/internals/array-from-constructor-and-list.js":(module,__unused_webpack_exports,__webpack_require__)=>{var lengthOfArrayLike=__webpack_require__("./node_modules/core-js/internals/length-of-array-like.js");module.exports=function(Constructor,list){for(var index=0,length=lengthOfArrayLike(list),result=new Constructor(length);length>index;)result[index]=list[index++];return result}},"./node_modules/core-js/internals/array-group.js":(module,__unused_webpack_exports,__webpack_require__)=>{var bind=__webpack_require__("./node_modules/core-js/internals/function-bind-context.js"),uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),IndexedObject=__webpack_require__("./node_modules/core-js/internals/indexed-object.js"),toObject=__webpack_require__("./node_modules/core-js/internals/to-object.js"),toPropertyKey=__webpack_require__("./node_modules/core-js/internals/to-property-key.js"),lengthOfArrayLike=__webpack_require__("./node_modules/core-js/internals/length-of-array-like.js"),objectCreate=__webpack_require__("./node_modules/core-js/internals/object-create.js"),arrayFromConstructorAndList=__webpack_require__("./node_modules/core-js/internals/array-from-constructor-and-list.js"),$Array=Array,push=uncurryThis([].push);module.exports=function($this,callbackfn,that,specificConstructor){for(var Constructor,key,value,O=toObject($this),self=IndexedObject(O),boundFunction=bind(callbackfn,that),target=objectCreate(null),length=lengthOfArrayLike(self),index=0;length>index;index++)value=self[index],(key=toPropertyKey(boundFunction(value,index,O)))in target?push(target[key],value):target[key]=[value];if(specificConstructor&&(Constructor=specificConstructor(O))!==$Array)for(key in target)target[key]=arrayFromConstructorAndList(Constructor,target[key]);return target}},"./node_modules/core-js/modules/esnext.array.group.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("./node_modules/core-js/internals/export.js"),$group=__webpack_require__("./node_modules/core-js/internals/array-group.js"),addToUnscopables=__webpack_require__("./node_modules/core-js/internals/add-to-unscopables.js");$({target:"Array",proto:!0},{group:function group(callbackfn){return $group(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("group")}}]);