"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[6851],{"./packages/design-system/src/icons/arrow_down.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgArrowDown=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m16.5 21.282 4.645-4.704a.5.5 0 0 1 .711.702l-5.5 5.571a.5.5 0 0 1-.712 0l-5.5-5.57a.5.5 0 0 1 .712-.703l4.644 4.704V9.5a.5.5 0 0 1 1 0z",clipRule:"evenodd"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgArrowDown)},"./packages/dashboard/src/app/views/myStories/content/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>content});__webpack_require__("./node_modules/react/index.js");var prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),infiniteScroller=__webpack_require__("./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx"),headline=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),router=__webpack_require__("./packages/dashboard/src/app/router/index.ts"),src_constants=__webpack_require__("./packages/dashboard/src/constants/index.ts"),components=__webpack_require__("./packages/dashboard/src/components/index.js"),shared=(__webpack_require__("./packages/dashboard/src/propTypes.js"),__webpack_require__("./packages/dashboard/src/utils/useStoryView.js"),__webpack_require__("./packages/dashboard/src/app/views/shared/index.js")),src=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/react/src/index.ts")),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),useSnackbar=__webpack_require__("./packages/design-system/src/contexts/snackbar/useSnackbar.ts"),loadingSpinner=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),utils=__webpack_require__("./packages/dashboard/src/utils/index.js"),arrow_down=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./packages/design-system/src/icons/arrow_down.svg")),config=__webpack_require__("./packages/dashboard/src/app/config/index.ts"),useStoryFilters=__webpack_require__("./packages/dashboard/src/app/views/myStories/filters/useStoryFilters.js"),date_src=__webpack_require__("./packages/date/src/index.ts"),story_menu_generator=__webpack_require__("./packages/dashboard/src/components/popoverMenu/story-menu-generator.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),lock_closed=__webpack_require__("./packages/design-system/src/icons/lock_closed.svg");const PreviewImage=styled_components_browser_esm.ZP.div.withConfig({displayName:"storyListItem__PreviewImage",componentId:"sc-1w22569-0"})(["display:inline-block;background:",";width:","px;height:","px;object-fit:contain;border-radius:",";"],(_ref=>{let{theme}=_ref;return theme.colors.gradient.placeholder}),src_constants.iD[src_constants.tm.THUMBNAIL],src_constants.iD[src_constants.tm.THUMBNAIL]/(3/4),(_ref2=>{let{theme}=_ref2;return theme.borders.radius.small})),PreviewWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"storyListItem__PreviewWrapper",componentId:"sc-1w22569-1"})(["position:relative;"]),LockIcon=(0,styled_components_browser_esm.ZP)(lock_closed.Z).withConfig({displayName:"storyListItem__LockIcon",componentId:"sc-1w22569-2"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:24px;display:block;margin:auto;background-color:",";color:",";border-radius:",";"],(_ref3=>{let{theme}=_ref3;return theme.colors.interactiveBg.brandNormal}),(_ref4=>{let{theme}=_ref4;return theme.colors.standard.white}),(_ref5=>{let{theme}=_ref5;return theme.borders.radius.round})),StyledTableRow=(0,styled_components_browser_esm.ZP)(components.SC).withConfig({displayName:"storyListItem__StyledTableRow",componentId:"sc-1w22569-3"})(["&:hover ",",&:focus-within ","{opacity:1;}"],components.qO,components.qO),TitleTableCellContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"storyListItem__TitleTableCellContainer",componentId:"sc-1w22569-4"})(["display:flex;align-items:center;justify-content:flex-start;","{margin:10px auto;}&:hover ",",&:active ","{opacity:1;}"],components.qO,components.qO,components.qO);var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function onFocusSelectAll(e){window.getSelection().selectAllChildren(e.target)}function onBlurDeselectAll(){window.getSelection().removeAllRanges()}const StoryListItem=_ref=>{let{story,renameStory,userId,storyMenu,storyStatus}=_ref;const isLocked=(0,src.Ye)((()=>story?.locked&&userId!==story?.lockUser.id),[story,userId]),formattedTitle=(0,utils.VU)(story.title),generatedMenuItems=(0,src.Ye)((()=>(0,story_menu_generator.r)({menuItems:storyMenu.menuItems,story,isLocked})),[storyMenu,story,isLocked]),memoizedStoryMenu=(0,src.Ye)((()=>generatedMenuItems.length?(0,jsx_runtime.jsx)(components.IC,{menuLabel:(0,sprintf.Z)((0,i18n.__)("Context menu for %s","web-stories"),formattedTitle),onMoreButtonSelected:(_,id)=>storyMenu.handleMenuToggle(id),contextMenuId:storyMenu.contextMenuId,storyId:story.id,menuItems:generatedMenuItems,verticalAlign:"center"}):null),[generatedMenuItems,formattedTitle,storyMenu,story]);return(0,jsx_runtime.jsxs)(StyledTableRow,{"data-testid":`story-list-item-${story.id}`,children:[(0,jsx_runtime.jsx)(components.nC,{children:(0,jsx_runtime.jsx)(components.u,{title:isLocked&&story?.lockUser.name?(0,sprintf.Z)((0,i18n.__)("%s is currently editing this story","web-stories"),story?.lockUser.name):"",children:(0,jsx_runtime.jsxs)(PreviewWrapper,{children:[(0,jsx_runtime.jsx)(PreviewImage,{...story.featuredMediaUrl?{src:story.featuredMediaUrl,alt:(0,sprintf.Z)((0,i18n.__)("%s Poster image","web-stories"),formattedTitle),as:"img",decoding:"async"}:null}),isLocked&&(0,jsx_runtime.jsx)(LockIcon,{})]})})}),(0,jsx_runtime.jsx)(components.pj,{children:(0,jsx_runtime.jsx)(TitleTableCellContainer,{children:renameStory.id===story.id?(0,jsx_runtime.jsx)(components._m,{onEditComplete:newTitle=>renameStory.handleOnRenameStory(story,newTitle),onEditCancel:renameStory.handleCancelRename,value:story.title,id:story.id,label:(0,i18n.__)("Rename story","web-stories")}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(headline.s,{tabIndex:0,onFocus:onFocusSelectAll,onBlur:onBlurDeselectAll,size:types.TextSize.XXXSmall,as:"h3","aria-label":isLocked?(0,sprintf.Z)((0,i18n.__)("%1$s (locked by %2$s)","web-stories"),formattedTitle,story?.lockUser.name):formattedTitle,children:formattedTitle}),memoizedStoryMenu]})})}),(0,jsx_runtime.jsx)(components.pj,{children:(0,jsx_runtime.jsx)(typography_text.x.Span,{size:types.TextSize.Small,children:story.author?.name||"â€”"})}),(0,jsx_runtime.jsx)(components.pj,{children:(0,jsx_runtime.jsx)(typography_text.x.Span,{size:types.TextSize.Small,children:(0,date_src.t9)(story.createdGmt)})}),(0,jsx_runtime.jsx)(components.pj,{children:(0,jsx_runtime.jsx)(typography_text.x.Span,{size:types.TextSize.Small,children:(0,date_src.t9)(story.modifiedGmt)})}),storyStatus!==src_constants.HZ.DRAFT&&(0,jsx_runtime.jsx)(components.Rc,{children:(0,jsx_runtime.jsx)(typography_text.x.Span,{size:types.TextSize.Small,children:src_constants.Uq[story?.status]})})]})};StoryListItem.displayName="StoryListItem";var helpers=__webpack_require__("./packages/design-system/src/theme/helpers/index.ts");const{focusableOutlineCSS}=helpers,ListView=styled_components_browser_esm.ZP.div.withConfig({displayName:"listView__ListView",componentId:"sc-15nl0r5-0"})(["width:100%;"]),ArrowIcon=styled_components_browser_esm.ZP.div.withConfig({displayName:"listView__ArrowIcon",componentId:"sc-15nl0r5-1"})(["width:32px;height:100%;display:inline-grid;color:",";vertical-align:middle;svg{visibility:",";transition:transform 0.15s;",";}"],(_ref=>{let{theme}=_ref;return theme.colors.fg.primary}),(_ref2=>{let{active}=_ref2;return active?"visible":"hidden"}),(_ref3=>{let{asc}=_ref3;return asc&&(0,styled_components_browser_esm.iv)(["transform:rotate(180deg);"])})),EmptyIconSpace=styled_components_browser_esm.ZP.div.withConfig({displayName:"listView__EmptyIconSpace",componentId:"sc-15nl0r5-2"})(["height:32px;width:32px;"]),ArrowIconWithTitle=(0,styled_components_browser_esm.ZP)(ArrowIcon).withConfig({displayName:"listView__ArrowIconWithTitle",componentId:"sc-15nl0r5-3"})([""," position:absolute;top:16px;@media ","{margin-left:4px;}"],(_ref4=>{let{active}=_ref4;return!active&&"display: none;"}),(_ref5=>{let{theme}=_ref5;return theme.breakpoint.mobile})),SelectableTitle=(0,styled_components_browser_esm.ZP)(typography_text.x.Span).attrs({tabIndex:0,isBold:!0}).withConfig({displayName:"listView__SelectableTitle",componentId:"sc-15nl0r5-4"})(["color:",";cursor:pointer;",";"],(_ref6=>{let{theme}=_ref6;return theme.colors.blue[70]}),(_ref7=>{let{theme}=_ref7;return focusableOutlineCSS(theme.colors.border.focus,theme.colors.bg.secondary)})),toggleSortLookup={[src_constants.B8.DESC]:src_constants.B8.ASC,[src_constants.B8.ASC]:src_constants.B8.DESC};function StoryListView(_ref){let{hideStoryList,renameStory,stories,storyMenu}=_ref;const{userId,styleConstants:{topOffset}}=(0,config.Z)(),{filters,sortObject,updateSort}=(0,useStoryFilters.Z)((_ref2=>{let{state:{filters,sortObject},actions:{updateSort}}=_ref2;return{filters,sortObject,updateSort}})),[storySort,sortDirection]=(0,src.Ye)((()=>[sortObject?.orderby,sortObject?.order]),[sortObject]),statusFilterValue=(0,src.Ye)((()=>filters.filter((_ref3=>{let{key}=_ref3;return"status"===key})).filterId),[filters]),onSortTitleSelected=(0,src.I4)((orderby=>{updateSort(orderby!==storySort?{orderby,order:src_constants.wB[orderby]}:{order:toggleSortLookup[sortDirection]})}),[updateSort,storySort,sortDirection]),onKeyDownSort=(0,src.I4)(((_ref4,sortBy)=>{let{key}=_ref4;"Enter"===key&&onSortTitleSelected(sortBy)}),[onSortTitleSelected]),tableContents=(0,src.Ye)((()=>!hideStoryList&&stories.map((story=>(0,jsx_runtime.jsx)(StoryListItem,{story,userId,renameStory,storyStatus:statusFilterValue,storyMenu},`story-${story.id}`)))),[hideStoryList,renameStory,stories,statusFilterValue,storyMenu,userId]);return(0,jsx_runtime.jsx)(ListView,{"data-testid":"story-list-view",children:(0,jsx_runtime.jsxs)(components.iA,{"aria-label":(0,i18n.__)("List view of created stories","web-stories"),children:[(0,jsx_runtime.jsx)(components.TZ,{topOffset,children:(0,jsx_runtime.jsxs)(components.SC,{children:[(0,jsx_runtime.jsx)(components.ww,{onClick:()=>onSortTitleSelected(src_constants.YN.NAME),onKeyDown:e=>onKeyDownSort(e,src_constants.YN.NAME),children:(0,jsx_runtime.jsx)(SelectableTitle,{"aria-label":(0,i18n.__)("Title, select to sort table by story title","web-stories"),size:types.TextSize.Small,isBold:!0,children:(0,i18n.__)("Title","web-stories")})}),(0,jsx_runtime.jsxs)(components.tP,{onClick:()=>onSortTitleSelected(src_constants.YN.NAME),onKeyDown:e=>onKeyDownSort(e,src_constants.YN.NAME),children:[(0,jsx_runtime.jsx)(SelectableTitle,{"aria-hidden":!0,active:storySort===src_constants.YN.NAME,size:types.TextSize.Small,isBold:!0,children:(0,i18n.__)("Title","web-stories")}),(0,jsx_runtime.jsx)(ArrowIcon,{active:storySort===src_constants.YN.NAME,asc:sortDirection===src_constants.B8.ASC,children:(0,jsx_runtime.jsx)(arrow_down.Z,{})})]}),(0,jsx_runtime.jsxs)(components.dz,{children:[(0,jsx_runtime.jsx)(SelectableTitle,{"aria-label":(0,i18n.__)("Author, select to sort table by story author","web-stories"),onClick:()=>onSortTitleSelected(src_constants.YN.CREATED_BY),onKeyDown:e=>onKeyDownSort(e,src_constants.YN.CREATED_BY),active:storySort===src_constants.YN.CREATED_BY,size:types.TextSize.Small,isBold:!0,children:(0,i18n.__)("Author","web-stories")}),(0,jsx_runtime.jsx)(ArrowIconWithTitle,{"aria-hidden":!0,active:storySort===src_constants.YN.CREATED_BY,asc:sortDirection===src_constants.B8.ASC,children:storySort===src_constants.YN.CREATED_BY?(0,jsx_runtime.jsx)(arrow_down.Z,{}):(0,jsx_runtime.jsx)(EmptyIconSpace,{})})]}),(0,jsx_runtime.jsxs)(components.Yu,{children:[(0,jsx_runtime.jsx)(SelectableTitle,{"aria-label":(0,i18n.__)("Creation date, select to sort table by date story was created","web-stories"),onClick:()=>onSortTitleSelected(src_constants.YN.DATE_CREATED),onKeyDown:e=>onKeyDownSort(e,src_constants.YN.DATE_CREATED),active:storySort===src_constants.YN.DATE_CREATED,size:types.TextSize.Small,isBold:!0,children:(0,i18n.__)("Date Created","web-stories")}),(0,jsx_runtime.jsx)(ArrowIconWithTitle,{"aria-hidden":!0,active:storySort===src_constants.YN.DATE_CREATED,asc:sortDirection===src_constants.B8.ASC,children:(0,jsx_runtime.jsx)(arrow_down.Z,{})})]}),(0,jsx_runtime.jsxs)(components.Yu,{children:[(0,jsx_runtime.jsx)(SelectableTitle,{"aria-label":(0,i18n.__)("Modification date, select to sort table by date story was last modified","web-stories"),onClick:()=>onSortTitleSelected(src_constants.YN.LAST_MODIFIED),onKeyDown:e=>onKeyDownSort(e,src_constants.YN.LAST_MODIFIED),active:storySort===src_constants.YN.LAST_MODIFIED,size:types.TextSize.Small,isBold:!0,children:(0,i18n.__)("Last Modified","web-stories")}),(0,jsx_runtime.jsx)(ArrowIconWithTitle,{"aria-hidden":!0,active:storySort===src_constants.YN.LAST_MODIFIED,asc:sortDirection===src_constants.B8.ASC,children:(0,jsx_runtime.jsx)(arrow_down.Z,{})})]}),statusFilterValue!==src_constants.HZ.DRAFT&&(0,jsx_runtime.jsx)(components.nA,{children:(0,jsx_runtime.jsx)(typography_text.x.Span,{isBold:!0,size:types.TextSize.Small,children:(0,i18n.__)("Publish State","web-stories")})})]})}),(0,jsx_runtime.jsx)(components.RM,{children:tableContents})]})})}StoryListView.displayName="StoryListView";var storyGridView=__webpack_require__("./packages/dashboard/src/app/views/myStories/content/storyGridView/index.js");const storiesView=function StoriesView(_ref){let{loading,storyActions,stories,view}=_ref;const[contextMenuId,setContextMenuId]=(0,src.eJ)(-1),[titleRenameId,setTitleRenameId]=(0,src.eJ)(-1),[activeDialog,setActiveDialog]=(0,src.eJ)(""),[activeStory,setActiveStory]=(0,src.eJ)(null),[focusedStory,setFocusedStory]=(0,src.eJ)({}),[returnStoryFocusId,setReturnStoryFocusId]=(0,src.eJ)(null),{showSnackbar}=(0,useSnackbar.D)(),isActiveDeleteStoryDialog="DELETE_STORY"===activeDialog&&activeStory,storiesById=(0,src.Ye)((()=>stories.map((_ref2=>{let{id}=_ref2;return id}))),[stories]);(0,src.d4)((()=>{if(focusedStory.id&&!returnStoryFocusId){const storyArrayIndex=storiesById.indexOf(focusedStory.id),isDeletedAdjustmentDirection=storyArrayIndex>0?-1:1,adjustedIndex=focusedStory.isDeleted?isDeletedAdjustmentDirection:0,storyIdToFocus=storiesById[storyArrayIndex+adjustedIndex];storyIdToFocus&&setReturnStoryFocusId(storyIdToFocus)}}),[focusedStory,returnStoryFocusId,storiesById]),(0,src.d4)((()=>{activeDialog||setActiveStory(null)}),[activeDialog,setActiveStory]),(0,src.d4)((()=>{activeDialog&&(setFocusedStory({}),setReturnStoryFocusId(null))}),[activeDialog]);const handleOnRenameStory=(0,src.I4)(((story,newTitle)=>{setTitleRenameId(-1),(0,tracking_src.L9)("rename_story"),storyActions.updateStory({...story,title:{raw:newTitle}})}),[storyActions]),handleOnDeleteStory=(0,src.I4)((()=>{(0,tracking_src.L9)("delete_story"),storyActions.trashStory(activeStory),setFocusedStory({id:activeStory.id,isDeleted:!0}),setActiveDialog("")}),[storyActions,activeStory]),handleOpenStoryInEditor=(0,src.I4)((()=>{setContextMenuId(-1),(0,tracking_src.L9)("open_in_editor")}),[]),handleRenameStory=(0,src.I4)((story=>{setContextMenuId(-1),setTitleRenameId(story.id)}),[]),handleDuplicateStory=(0,src.I4)((story=>{setContextMenuId(-1),(0,tracking_src.L9)("duplicate_story"),storyActions.duplicateStory(story),setFocusedStory({id:story.id})}),[storyActions]),handleDeleteStory=(0,src.I4)((story=>{setContextMenuId(-1),setActiveStory(story),setActiveDialog("DELETE_STORY")}),[]),handleCopyStoryLink=(0,src.I4)((story=>{setContextMenuId(-1),window.navigator.clipboard.writeText(story.link),showSnackbar({message:(0,sprintf.Z)((0,i18n.__)("%s has been copied to your clipboard.","web-stories"),(0,utils.VU)(story.title)),dismissible:!0}),setFocusedStory({id:story.id})}),[showSnackbar]),menuItems=src_constants.LW.map((item=>{switch(item?.value){case src_constants.D6.COPY_STORY_LINK:item.action=handleCopyStoryLink;break;case src_constants.D6.DELETE:item.action=handleDeleteStory;break;case src_constants.D6.DUPLICATE:item.action=handleDuplicateStory;break;case src_constants.D6.OPEN_STORY_LINK:item.action=handleOpenStoryInEditor;break;case src_constants.D6.RENAME:item.action=handleRenameStory;break;default:item.action=()=>setContextMenuId(-1)}return item})),storyMenu=(0,src.Ye)((()=>({handleMenuToggle:setContextMenuId,contextMenuId,menuItems})),[contextMenuId,menuItems,setContextMenuId]),renameStory=(0,src.Ye)((()=>({id:titleRenameId,handleOnRenameStory,handleCancelRename:()=>setTitleRenameId(-1)})),[handleOnRenameStory,setTitleRenameId,titleRenameId]),ActiveView=(0,src.Ye)((()=>view.style===src_constants.$Y.LIST?(0,jsx_runtime.jsx)(StoryListView,{hideStoryList:loading?.isLoading&&!loading?.showStoriesWhileLoading.current,pageSize:view.pageSize,renameStory,stories,storyMenu}):!loading?.isLoading||loading?.isLoading&&loading?.showStoriesWhileLoading.current?(0,jsx_runtime.jsx)(storyGridView.Z,{isLoading:loading?.isLoading,pageSize:view.pageSize,renameStory,storyMenu,stories,returnStoryFocusId:{value:returnStoryFocusId,set:setReturnStoryFocusId}}):null),[loading,renameStory,returnStoryFocusId,stories,storyMenu,view]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[ActiveView,loading?.isLoading&&!loading?.showStoriesWhileLoading.current&&(0,jsx_runtime.jsx)(components.ly,{children:(0,jsx_runtime.jsx)(loadingSpinner.Z,{})}),isActiveDeleteStoryDialog&&(0,jsx_runtime.jsx)(components.Vq,{isOpen:!0,contentLabel:(0,i18n.__)("Dialog to confirm deleting a story","web-stories"),title:(0,i18n.__)("Delete Story","web-stories"),onClose:()=>{setFocusedStory({id:activeStory.id}),setActiveDialog("")},secondaryText:(0,i18n.__)("Cancel","web-stories"),secondaryRest:{"aria-label":(0,sprintf.Z)((0,i18n.__)('Cancel deleting story "%s"',"web-stories"),(0,utils.VU)(activeStory.title))},primaryText:(0,i18n.__)("Delete","web-stories"),onPrimary:handleOnDeleteStory,primaryRest:{"aria-label":(0,sprintf.Z)((0,i18n.__)('Confirm deleting story "%s"',"web-stories"),(0,utils.VU)(activeStory.title))},children:(0,jsx_runtime.jsx)(typography_text.x.Paragraph,{size:types.TextSize.Small,children:(0,sprintf.Z)((0,i18n.__)('Are you sure you want to delete "%s"?',"web-stories"),(0,utils.VU)(activeStory.title))})})]})};function NoAvailableContent(_ref){let{filtersObject}=_ref;const{search}=filtersObject;return search?(0,sprintf.Z)((0,i18n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),search):0!==Object.keys(filtersObject).length?(0,i18n.__)("Sorry, we couldn't find any results","web-stories"):(0,i18n.__)("Start telling Stories.","web-stories")}function Content(_ref2){let{allPagesFetched,canViewDefaultTemplates,filtersObject={},loading,page,stories,storyActions,view}=_ref2;return(0,jsx_runtime.jsx)(components.Ar.Scrollable,{children:(0,jsx_runtime.jsx)(components.wD,{children:stories.length>0?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(storiesView,{storyActions,stories,view,loading}),(0,jsx_runtime.jsx)(infiniteScroller.Z,{canLoadMore:!allPagesFetched,isLoading:loading?.isLoading,allDataLoadedMessage:(0,i18n.__)("No more stories","web-stories"),allDataLoadedAriaMessage:(0,i18n.__)("All stories are loaded","web-stories"),loadingAriaMessage:(0,i18n.__)("Loading more stories","web-stories"),onLoadMore:page.requestNextPage})]}):!loading?.isLoading&&(0,jsx_runtime.jsxs)(shared.Xr,{children:[(0,jsx_runtime.jsx)(headline.s,{size:types.TextSize.Small,as:"h3",children:(0,jsx_runtime.jsx)(NoAvailableContent,{filtersObject})}),0===Object.keys(filtersObject).length&&canViewDefaultTemplates&&(0,jsx_runtime.jsx)(button_button.i,{type:constants.L$.Primary,size:constants.qE.Medium,href:(0,router.kH)(src_constants.QY.TEMPLATES_GALLERY),children:(0,i18n.__)("Explore Templates","web-stories")})]})})})}NoAvailableContent.propTypes={filtersObject:prop_types_default().object},Content.displayName="Content";const content=Content},"./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_loadingSpinner__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),_typography__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ScrollMessage=styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP.div.withConfig({displayName:"infiniteScroller__ScrollMessage",componentId:"sc-smx7an-0"})(["width:100%;padding:140px 0 40px;margin:-100px auto 0;text-align:center;p{color:",";}"],(_ref=>{let{theme}=_ref;return theme.colors.fg.tertiary})),LoadingContainer=styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP.div.withConfig({displayName:"infiniteScroller__LoadingContainer",componentId:"sc-smx7an-1"})(["display:flex;justify-content:center;"]),AriaOnlyAlert=styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP.span.withConfig({displayName:"infiniteScroller__AriaOnlyAlert",componentId:"sc-smx7an-2"})(["",""],_theme__WEBPACK_IMPORTED_MODULE_6__.j);var State=function(State){return State.Loadable="loadable",State.LoadingInternal="loading_internal",State.LoadingExternal="loading_external",State.Complete="complete",State}(State||{}),Action=function(Action){return Action.OnInternalLoad="internal on load",Action.OnExternalLoad="external on load",Action.OnAllLoaded="all loaded",Action.OnLoadSuccess="load success",Action.OnCanLoadMore="can load more",Action}(Action||{});const machine={[State.Loadable]:{[Action.OnInternalLoad]:State.LoadingInternal,[Action.OnExternalLoad]:State.LoadingExternal},[State.LoadingInternal]:{[Action.OnAllLoaded]:State.Complete,[Action.OnLoadSuccess]:State.Loadable},[State.LoadingExternal]:{[Action.OnAllLoaded]:State.Complete,[Action.OnLoadSuccess]:State.Loadable},[State.Complete]:{[Action.OnCanLoadMore]:State.Loadable}},loadReducer=(state,action)=>machine[state][action]||state;function InfiniteScroller(_ref2){let{allDataLoadedMessage,allDataLoadedAriaMessage,onLoadMore,canLoadMore,isLoading,loadingAriaMessage,loadingSpinnerProps={animationSize:50,circleSize:6}}=_ref2;const loadingRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.sO)(null),onLoadMoreRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.sO)(onLoadMore);onLoadMoreRef.current=onLoadMore;const[loadState,dispatch]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__._Y)(loadReducer,State.Loadable),loadingAlert=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.Ye)((()=>loadState===State.LoadingInternal?loadingAriaMessage:loadState===State.LoadingExternal||canLoadMore?null:allDataLoadedAriaMessage),[allDataLoadedAriaMessage,loadingAriaMessage,loadState,canLoadMore]);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.d4)((()=>{loadState===State.LoadingInternal&&onLoadMoreRef.current?.()}),[loadState]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.d4)((()=>{isLoading&&dispatch(Action.OnExternalLoad)}),[isLoading]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.d4)((()=>{isLoading||dispatch(canLoadMore?Action.OnLoadSuccess:Action.OnAllLoaded)}),[isLoading,canLoadMore]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.d4)((()=>{canLoadMore&&dispatch(Action.OnCanLoadMore)}),[canLoadMore]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.d4)((()=>{if(!loadingRef.current)return;const observer=new IntersectionObserver((entries=>{entries.forEach((entry=>{entry.isIntersecting&&dispatch(Action.OnInternalLoad)}))}),{rootMargin:"0px",threshold:0}),triggerEl=loadingRef.current;return observer.observe(triggerEl),()=>{observer.unobserve(triggerEl)}}),[]);const loadingContent=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.Ye)((()=>loadState===State.LoadingExternal?null:canLoadMore?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(LoadingContainer,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_loadingSpinner__WEBPACK_IMPORTED_MODULE_9__.Z,{...loadingSpinnerProps})}):allDataLoadedMessage?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_typography__WEBPACK_IMPORTED_MODULE_7__.x.Paragraph,{size:_theme__WEBPACK_IMPORTED_MODULE_8__.TextSize.Small,children:allDataLoadedMessage}):null),[allDataLoadedMessage,canLoadMore,loadState,loadingSpinnerProps]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(ScrollMessage,{"data-testid":"load-more-on-scroll",ref:loadingRef,children:[loadingAlert&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(AriaOnlyAlert,{role:"status",children:loadingAlert}),loadingContent]})}InfiniteScroller.displayName="InfiniteScroller";const __WEBPACK_DEFAULT_EXPORT__=InfiniteScroller},"./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),uuid__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/i18n/src/i18n.ts"),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/constants/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const TAU=2*Math.PI,AriaOnlyAlert=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.span.withConfig({displayName:"loadingSpinner__AriaOnlyAlert",componentId:"sc-10eor9p-0"})(["",""],_theme__WEBPACK_IMPORTED_MODULE_5__.j),Container=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.div.withConfig({displayName:"loadingSpinner__Container",componentId:"sc-10eor9p-1"})(["position:relative;height:","px;width:","px;color:",";"],(_ref=>{let{animationSize}=_ref;return animationSize}),(_ref2=>{let{animationSize}=_ref2;return animationSize}),(_ref3=>{let{theme}=_ref3;return theme.colors.interactiveBg.brandNormal})),Circle=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.div.withConfig({displayName:"loadingSpinner__Circle",componentId:"sc-10eor9p-2"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) ",";height:","px;width:","px;background-color:",";border-radius:",";animation-name:",";animation-fill-mode:both;animation-duration:","s;animation-iteration-count:infinite;animation-timing-function:",";"],(_ref4=>{let{$position:{x,y}}=_ref4;return`translate(${x}px, ${y}px)`}),(_ref5=>{let{circleSize}=_ref5;return circleSize}),(_ref6=>{let{circleSize}=_ref6;return circleSize}),(_ref7=>{let{theme}=_ref7;return theme.colors.interactiveBg.brandNormal}),(_ref8=>{let{theme}=_ref8;return theme.borders.radius.round}),(_ref9=>{let{circleIndex,numCircles}=_ref9;return(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.F4)(["0%{opacity:1}","{opacity:1}","{opacity:0.3}","{opacity:1}"],100*circleIndex/numCircles+"%",100*(circleIndex+1)/numCircles+"%",100*(circleIndex+1)/numCircles+1+"%")}),.85,_theme__WEBPACK_IMPORTED_MODULE_6__.s.inOutQuad);function LoadingSpinner(_ref10){let{animationSize=95,circleSize=12,loadingMessage=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.__)("Loading","web-stories"),numCircles=11,...props}=_ref10;const ids=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Ye)((()=>new Array(numCircles).fill(1).map((()=>(0,uuid__WEBPACK_IMPORTED_MODULE_8__.Z)()))),[numCircles]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(Container,{animationSize,...props,children:[loadingMessage&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(AriaOnlyAlert,{role:"status",children:loadingMessage}),ids.map(((id,index)=>{const angle=((index,numCircles)=>TAU*index/numCircles)(index,numCircles),position=((angle,animationSize)=>{const radius=animationSize/2,x=Math.sin(angle)*radius,y=-Math.cos(angle)*radius;return{x:x.toFixed(1),y:y.toFixed(1)}})(angle,animationSize);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Circle,{circleIndex:index,circleSize,numCircles,$position:position},id)}))]})}LoadingSpinner.displayName="LoadingSpinner";const __WEBPACK_DEFAULT_EXPORT__=LoadingSpinner},"./packages/design-system/src/contexts/snackbar/context.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(0,__webpack_require__("./packages/react/src/index.ts").kr)({showSnackbar:()=>!1,clearSnackbar:()=>!1,removeSnack:()=>!1,currentSnacks:[],placement:""})},"./packages/design-system/src/contexts/snackbar/snackbarProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/react/src/index.ts"),uuid__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_context__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/contexts/snackbar/context.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");function SnackbarProvider(_ref){let{children,placement="bottom"}=_ref;const[notifications,setNotifications]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.eJ)([]),remove=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.I4)((toRemove=>{setNotifications((currentNotifications=>currentNotifications.filter((item=>Array.isArray(toRemove)?!toRemove.find((_ref2=>{let{id}=_ref2;return id===item.id})):item.id!==toRemove.id))))}),[]),create=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.I4)((notification=>{const newNotification={id:(0,uuid__WEBPACK_IMPORTED_MODULE_6__.Z)(),...notification};setNotifications((currentNotifications=>[...currentNotifications,newNotification]))}),[]),clear=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.I4)((()=>{setNotifications([])}),[]),state=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Ye)((()=>({showSnackbar:create,clearSnackbar:clear,removeSnack:remove,currentSnacks:notifications,placement})),[create,clear,remove,notifications,placement]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_context__WEBPACK_IMPORTED_MODULE_7__.Z.Provider,{value:state,children})}SnackbarProvider.displayName="SnackbarProvider";const __WEBPACK_DEFAULT_EXPORT__=SnackbarProvider},"./packages/design-system/src/contexts/snackbar/useSnackbar.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>useSnackbar});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/contexts/snackbar/context.ts");function useSnackbar(){let selector=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.yR;return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.Sz)(_context__WEBPACK_IMPORTED_MODULE_1__.Z,selector)}},"./packages/design-system/src/theme/helpers/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{focusableOutlineCSS:()=>_outline__WEBPACK_IMPORTED_MODULE_0__.L});var _outline__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts")}}]);